{% extends 'base.html.twig' %}

{% block body %}
<!-- Section Header -->
<div class="container">
    <div class="row">
        <div class="col-lg-12 text-center">
            <h6>Détails du Foyer Universitaire</h6>
            <h2>{{ foyer.nomFoyer }}</h2>
        </div>
    </div>
</div>

<!-- Section Détails Foyer -->
<section class="meetings-page" id="meetings" style="background-color: #fafafa; padding: 30px 0 20px 0;">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-lg border-0">

                    <!-- Galerie d'Images -->
                    <div id="foyerCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{ asset('images/doubleroom.jpg') }}" class="d-block w-100" alt="Double Room" style="height: 300px; object-fit: cover;">
                            </div>
                            <div class="carousel-item">
                                <img src="{{ asset('images/singleroom.jpg') }}" class="d-block w-100" alt="Single Room" style="height: 300px; object-fit: cover;">
                            </div>
                            <div class="carousel-item">
                                <img src="{{ asset('images/salledebainfoyer.jpg') }}" class="d-block w-100" alt="Salle de Bain" style="height: 300px; object-fit: cover;">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#foyerCarousel" role="button" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Précédent</span>
                        </a>
                        <a class="carousel-control-next" href="#foyerCarousel" role="button" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Suivant</span>
                        </a>
                    </div>

                    <!-- Contenu principal -->
                    <div class="card-body" style="background-color: #fff; padding: 20px;">
                        <h3 class="fw-bold text-center text-dark mb-3">{{ foyer.nomFoyer }}</h3>
                        <p class="text-muted text-center mb-2">
                            <i class="bi bi-geo-alt text-danger"></i> {{ foyer.lieuFoyer }}
                        </p>
                        <p class="text-muted text-center mb-3">
                            <i class="bi bi-door-closed"></i> Nombre de places disponibles : <strong>{{ foyer.getNombreChambresDouble()*2 + foyer.getNombreChambresSingle() }}</strong>
                        </p>

                        <div class="row text-center mb-3">
                            <div class="col-6">
                                <p><i class="bi bi-door-closed"></i> Places disponibles pour chambre simple :  <strong>{{ foyer.getNombreChambresSingle()}}</strong></p>
                            </div>
                            <div class="col-6">
                                <p> <i class="bi bi-door-closed"></i> Places disponibles pour chambre double : <strong>{{foyer.getNombreChambresDouble()*2}}</strong></p>
                            </div>
                            <div class="col-6">
                                <p><i class="bi bi-cash"></i> Prix Chambre Double : <strong>450 DT</strong></p>
                            </div>
                            <div class="col-6">
                                <p><i class="bi bi-cash"></i> Prix Chambre Simple : <strong>750 DT</strong></p>
                            </div>
                        </div>

                        <!-- Section des services supplémentaires -->
                        <div class="container my-3">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <div class="bg-light p-3 rounded shadow-sm">
                                        <h4 class="fw-bold text-dark text-center mb-3">Services Supplémentaires</h4>

                                        <div class="row text-center mb-3">
                                            <div class="col-6">
                                                <p><i class="bi bi-snow" style="font-size: 24px; color: #007bff;"></i> <strong>Climatisation</strong>: <span class="text-muted">+200 DT</span></p>
                                            </div>
                                            <div class="col-6">
                                                <p><i class="bi bi-thermometer" style="font-size: 24px; color: #ff7f50;"></i> <strong>Chauffage</strong>: <span class="text-muted">+100 DT</span></p>
                                            </div>
                                        </div>

                                        <p class="text-muted mb-3 text-center">
                                            Ces services peuvent être ajoutés à votre réservation pour plus de confort pendant votre séjour.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Description du Foyer -->
                        <div class="container my-3">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <div class="bg-light p-3 rounded shadow-sm">
                                        <h4 class="fw-bold text-dark text-center mb-3">Description du Foyer</h4>

                                        <p class="text-muted text-center mb-3">Le foyer universitaire <strong>{{ foyer.nomFoyer }}</strong> est un établissement moderne et spacieux, idéalement situé à <strong>{{ foyer.lieuFoyer }}</strong>. Il propose une large gamme de services pour ses résidents, assurant ainsi un séjour agréable et confortable.</p>

                                        <p class="text-muted text-center mb-3">Pour toute information supplémentaire ou pour effectuer une réservation, n'hésitez pas à nous contacter ou à visiter la section "Réservation" pour vérifier les disponibilités.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bouton Réserver -->
                        <div class="text-center mt-3">
                            <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#reservationModal">
                                Réserver Maintenant
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Retour à la liste des foyers -->
                <div class="text-center mt-3">
                    <a href="{{ path('app_foyer_list') }}" class="btn btn-outline-dark">
                        Retour à la Liste des Foyers
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>




<!-- Modale de Réservation -->
<div class="modal fade" id="reservationModal" tabindex="-1" aria-labelledby="reservationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="reservationModalLabel">Réservation Foyer</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="{{ path('app_foyer_details', { 'id': foyer.id }) }}" method="POST" id="reservationForm">
                    {{ form_start(reservationForm) }}

                    <div class="mb-3">
                        <label for="reservationForm_email" class="form-label">Adresse Email</label>
                        {{ form_widget(reservationForm.email, { 'attr': { 'class': 'form-control' } }) }}
                    </div>
                    <div class="mb-3">
                        <label for="reservationForm_niveauUniversitaire" class="form-label">Niveau Universitaire</label>
                        {{ form_widget(reservationForm.niveauUniversitaire, { 'attr': { 'class': 'form-select' } }) }}
                    </div>
                    {# <div class="mb-3">
                        <label for="reservationForm_typeChambre" class="form-label">Type de Chambre</label>
                        {{ form_widget(reservationForm.typeChambre, { 'attr': { 'class': 'form-select' } }) }}
                    </div>
                    <div class="mb-3">
                        <label for="reservationForm_chambre" class="form-label">Numéro de Chambre</label>
                        {{ form_widget(reservationForm.chambre, { 'attr': { 'class': 'form-select' } }) }}
                    </div> #}
                    <div class="mb-3">
                        <label for="reservationForm_typeChambre" class="form-label">Type de Chambre</label>
                        {{ form_widget(reservationForm.typeChambre, { 'attr': { 'class': 'form-select', 'id': 'reservationForm_typeChambre' } }) }}
                    </div>
                    <div class="mb-3">
                        <label for="reservationForm_chambre" class="form-label">Numéro de Chambre</label>
                        {{ form_widget(reservationForm.chambre, { 'attr': { 'class': 'form-select', 'id': 'reservationForm_chambre' } }) }}
                    </div>
                    <input type="hidden" id="foyerId" value="{{ foyer }}">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-danger">Soumettre la Réservation</button>
                    </div>
                    
                    {{ form_end(reservationForm) }}
                </form>
            </div>
        </div>
    </div>
</div>


<!-- Custom Styles -->
<style>
    .modal-content {
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .modal-header {
        background-color: #e74c3c;
        color: white;
        font-weight: bold;
    }

    .form-label {
        font-size: 1rem;
        font-weight: 500;
        color: #333;
    }

    .form-control, .form-select {
        border-radius: 5px;
        border: 1px solid #ccc;
        padding: 10px;
    }

    .btn-danger {
        background-color: #e74c3c;
        border-color: #e74c3c;
    }

    .btn-danger:hover {
        background-color: #c0392b;
        border-color: #c0392b;
    }
</style>





<style>
    .foyer-heading-page {
        background-image: url('{{ asset('images/foyer.jpg') }}');
        background-size: cover;
        background-position: center;
        height: 400px;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        position: relative;
        color: white;
        overflow: hidden;
    }
    .foyer-heading-page::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1;
    }
    .foyer-heading-page h6, .foyer-heading-page h2 {
        position: relative;
        z-index: 2;
    }
    .foyer-heading-page h6 {
        margin-bottom: 10px;
        font-size: 16px;
        color: #fff;
    }
    .foyer-heading-page h2 {
        font-size: 36px;
        font-weight: bold;
        color: #fff;
    }
</style>

{% block javascripts %}
<script>
    // Réinitialiser le formulaire lorsque la modale est fermée
    var reservationModal = document.getElementById('reservationModal');
    reservationModal.addEventListener('hidden.bs.modal', function () {
        document.getElementById('reservationForm').reset();
    });

</script>
{% endblock %}

{% endblock %}
